# Basic Configuration Example

This example shows two different features of Fast DDS related with Dynamic Types:

* How to use different kind of Data Types from a Publisher point of view.
  In order to publish messages with specific data type, there are several ways to define the type:
  * Using IDL file defining the type and autogenerating code using Fast-DDS-Gen
  * Using XML type definition and loading type with `XMLProfileManager`
  * Defining type by code using Dynamic Types API

* How to create a generic Subscriber that is able to create a DataReader independently the Data Type.
  In order to do this, the type must be registered in the Participant, and this only possible if the Publisher
  is configured to share the Data Type information.
  The Dynamic Types API provides methods to introspect a data type to get data members names and values.

## Execution instructions

To launch this test open two different consoles:

In the first one launch: ./TypeIntrospectionExample publisher (or TypeIntrospectionExample.exe publisher on windows).
In the second one: ./TypeIntrospectionExample subscriber (or TypeIntrospectionExample.exe subscriber on windows).

## Arguments

First argument is `publisher` or `subscriber` and then the rest of arguments are read unordered

TODO refactor with this example arguments

```sh
Usage: TypeIntrospectionExample <publisher|subscriber>

General options:
  -h              --help
                    Produce help message.

Publisher options:
  -t <topic_name> --topic=<topic_name>
                    Topic name (Default: HelloWorldTopic).
  -d <id>         --domain=<id>
                    DDS domain ID (Default: 0).
  -w <num>        --wait=<num>
                    Number of matched subscribers required to publish (Default:
                    0 => does not wait).
  -s <num>        --samples=<num>
                    Number of samples to send (Default: 0 => infinite samples).
  -i <num>        --interval=<num>
                    Time between samples in milliseconds (Default: 100).
  -a              --async
                    Asynchronous publish mode (synchronous by default).
                  --transport=<shm|udp|udpv6>
                    Use only shared-memory, UDPv4, or UDPv6 transport.If not
                    set, use Fast DDS default transports (depending on the
                    scenario it will use the most efficient one:  data-sharing
                    delivery mechanism > shared-memory > UDP ).

Subscriber options:
  -t <topic_name> --topic=<topic_name>
                    Topic name (Default: HelloWorldTopic).
  -d <id>         --domain=<id>
                    DDS domain ID (Default: 0).
  -s <num>        --samples=<num>
                    Number of samples to wait for (Default: 0 => infinite
                    samples).
                  --transport=<shm|udp|udpv6>
                    Use only shared-memory, UDPv4, or UDPv6 transport.If not
                    set, use Fast DDS default transports (depending on the
                    scenario it will use the most efficient one:  data-sharing
                    delivery mechanism > shared-memory > UDP ).

QoS options:
  -r              --reliable
                    Set reliability to reliable (best-effort by default).
                  --transient
                    Set durability to transient local (volatile by default,
                    ineffective when not reliable).
```

### Publisher Data Type

The Publisher has an argument `type`.
Depending on this argument, the Publisher will create a DataWriter using different Data Types.
Each of the types available are registered in the Participant in different ways, to illustrate how this could
be done.

This Data Types are:

TODO

### Subscriber Data Type

The Subscriber will detect the data type name and will register the type by the information sent by the
publisher, so the subscriber does not need to know the type.
In order to introspect a Data Type, just launch the Subscriber with the topic name and the domain ID of a Data Writer
that uses this Data Type (be sure the DataWriter is configured to transmit Data Type introspection information).

---

## Useful Commands

### Generate autogenerated code from Fast DDS Gen

```sh
./src/fastddsgen/scripts/fastddsgen -replace  -d src/fastdds/examples/cpp/dds/TypeIntrospectionExample/types/hello_world/gen/ -typeobject -cs src/fastdds/examples/cpp/dds/TypeIntrospectionExample/types/hello_world/HelloWorld.idl
```
